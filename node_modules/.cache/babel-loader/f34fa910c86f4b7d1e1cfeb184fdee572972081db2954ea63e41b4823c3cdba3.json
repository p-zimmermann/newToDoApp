{"ast":null,"code":"import { useState, useEffect } from \"react\";\nexport default function (keyVal) {\n  const [todos, setTodos] = useState([]);\n  const [count, setCount] = useState();\n  if (localStorage.getItem(keyVal) === null) {\n    window.localStorage.setItem(\"myTodos\", JSON.stringify(todos));\n  } else {\n    //load todos from local storage\n    useEffect(() => {\n      JSON.parse(localStorage.getItem(keyVal));\n    });\n  }\n  window.addEventListener('load', () => {\n    setCount(todos.length);\n  });\n\n  /*     useEffect(() => {\n          if(count < 4 || !localStorage.getItem(keyVal)) {\n              //from object to string to set item\n              localStorage.setItem(keyVal,JSON.stringify(todos));\n              setCount(todos.length)\n              console.log(localStorage,count);\n          }\n      }, [todos,keyVal,count])\n  \n      useEffect(() => {\n          const todosStore = localStorage.getItems(keyVal);\n          setTodos(todosStore)\n      },[keyVal])\n  \n      const removeTodoFromStorage = (todosNew) => {\n          localStorage.setItem(keyVal,JSON.stringify(todosNew))\n      }\n  \n  \n      return [todos,setTodos,removeTodoFromStorage]; */\n}","map":{"version":3,"names":["useState","useEffect","keyVal","todos","setTodos","count","setCount","localStorage","getItem","window","setItem","JSON","stringify","parse","addEventListener","length"],"sources":["/Users/p.zimmermann/Documents/codingschule/newToDoApp/src/components/customHooks/useLocalStorage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\n\nexport default function(keyVal){\n    const[todos, setTodos] = useState([])\n    const[count, setCount] = useState()\n\n    if (localStorage.getItem(keyVal) === null){\n        window.localStorage.setItem(\"myTodos\", JSON.stringify(todos))\n    }\n    else{\n        //load todos from local storage\n        useEffect(()=>{\n            JSON.parse(localStorage.getItem(keyVal))\n        })\n    }\n\n    window.addEventListener('load',() => {\n        setCount(todos.length); \n    })\n\n/*     useEffect(() => {\n        if(count < 4 || !localStorage.getItem(keyVal)) {\n            //from object to string to set item\n            localStorage.setItem(keyVal,JSON.stringify(todos));\n            setCount(todos.length)\n            console.log(localStorage,count);\n        }\n    }, [todos,keyVal,count])\n\n    useEffect(() => {\n        const todosStore = localStorage.getItems(keyVal);\n        setTodos(todosStore)\n    },[keyVal])\n\n    const removeTodoFromStorage = (todosNew) => {\n        localStorage.setItem(keyVal,JSON.stringify(todosNew))\n    }\n\n\n    return [todos,setTodos,removeTodoFromStorage]; */\n}"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAG3C,eAAe,UAASC,MAAM,EAAC;EAC3B,MAAK,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGJ,QAAQ,CAAC,EAAE,CAAC;EACrC,MAAK,CAACK,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,EAAE;EAEnC,IAAIO,YAAY,CAACC,OAAO,CAACN,MAAM,CAAC,KAAK,IAAI,EAAC;IACtCO,MAAM,CAACF,YAAY,CAACG,OAAO,CAAC,SAAS,EAAEC,IAAI,CAACC,SAAS,CAACT,KAAK,CAAC,CAAC;EACjE,CAAC,MACG;IACA;IACAF,SAAS,CAAC,MAAI;MACVU,IAAI,CAACE,KAAK,CAACN,YAAY,CAACC,OAAO,CAACN,MAAM,CAAC,CAAC;IAC5C,CAAC,CAAC;EACN;EAEAO,MAAM,CAACK,gBAAgB,CAAC,MAAM,EAAC,MAAM;IACjCR,QAAQ,CAACH,KAAK,CAACY,MAAM,CAAC;EAC1B,CAAC,CAAC;;EAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}